<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySQL从安装到精通(一)---基础篇</title>
      <link href="/2024/08/23/MySQL%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%B2%BE%E9%80%9A-%E4%B8%80-%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
      <url>/2024/08/23/MySQL%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%B2%BE%E9%80%9A-%E4%B8%80-%E5%9F%BA%E7%A1%80%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="一-基础篇"><a href="#一-基础篇" class="headerlink" title="(一)基础篇"></a>(一)基础篇</h1><h3 id="By-Xi17g3"><a href="#By-Xi17g3" class="headerlink" title="By Xi17g3"></a>By Xi17g3</h3><h1 id="MySQL概述"><a href="#MySQL概述" class="headerlink" title="MySQL概述"></a>MySQL概述</h1><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><h3 id="MySQL的下载与安装"><a href="#MySQL的下载与安装" class="headerlink" title="MySQL的下载与安装"></a>MySQL的下载与安装</h3><p>从MySQL官网下载MySQL Community Server版本：</p><p>下载地址：<a href="https://www.mysql.com/">MySQL官网</a></p><p>点击Downloads</p><p><img src="/img/MySQL/a8a3debf5fe040d5a6b531ea38202739.png" alt="a8a3debf5fe040d5a6b531ea38202739"></p><p>找到对应的版本，下载最新版本即可：</p><p><img src="/img/MySQL/b08e93cf1b0a49fe8f5e9a253c969711.png" alt="b08e93cf1b0a49fe8f5e9a253c969711"></p><p><img src="/img/MySQL/688860a9b77547ceb2257ecb0e515a47.png" alt="688860a9b77547ceb2257ecb0e515a47"></p><p>在文件夹找到自己下载的安装文件：</p><p><img src="/img/MySQL/20240711192003072.png" alt="20240711192003072"></p><p>进入选择选择自定义安装方式，然后点击next，进入下一步：</p><p><img src="/img/MySQL/4f29219b42084b4f9525c35aef4dd1bd.png" alt="4f29219b42084b4f9525c35aef4dd1bd"></p><p>选x64版本的MySQL：</p><p><img src="/img/MySQL/37ea882cf41e4b9b859debc197b9eb9e.png" alt="37ea882cf41e4b9b859debc197b9eb9e"></p><p>install Directory是MySQL软件的安装路径<br>Data Directory是<a href="https://so.csdn.net/so/search?q=MySQL%E6%95%B0%E6%8D%AE%E5%BA%93&spm=1001.2101.3001.7020">MySQL数据库</a>数据存放的路径，这里不建议修改，然后next：</p><p><img src="/img/MySQL/c831f5bc5a7840abacaf947e43153487.png" alt="c831f5bc5a7840abacaf947e43153487"></p><p>点击Execute，进行安装前检查：</p><p><img src="/img/MySQL/fdb1472b925d4eda96f677d2e8b89771.png" alt="fdb1472b925d4eda96f677d2e8b89771"></p><p>接下来一路next…</p><p>输入数据库密码，点击next，进入下一步：</p><p><img src="/img/MySQL/5673be0a61e64718a0e2a032be7faa58.png" alt="5673be0a61e64718a0e2a032be7faa58"></p><p>默认数据库名字，点击next，进入下一步：</p><p><img src="/img/MySQL/0419d326424341f1a07f9db518908c77.png" alt="0419d326424341f1a07f9db518908c77"></p><p>剩下的一路next安装即可</p><p><strong>接下来配置系统环境变量</strong></p><p><img src="/img/MySQL/20240711193219819.png" alt="20240711193219819"></p><p>点击环境变量：</p><p><img src="/img/MySQL/9e38e633b509489c8bcd7bfca39c4b21.png" alt="9e38e633b509489c8bcd7bfca39c4b21"></p><p>找到系统环境变量里面的Path：</p><p><img src="/img/MySQL/20240711193407750.png" alt="20240711193407750"></p><p>双击编辑，将自己的安装路径添加进去即可，然后点确认：</p><p><img src="/img/MySQL/20240711193642430.png" alt="20240711193642430"></p><p><img src="/img/MySQL/20240711193457565.png" alt="20240711193457565"></p><p>win+R检测是否安装成功</p><p>打开cmd，输入命令：<code>mysql --version</code></p><p><img src="/img/MySQL/20240711193829947.png" alt="20240711193829947"></p><p>输入mysql -u 用户名 -p 后回车，输入密码，打开mysql的执行窗口</p><p>连接、启动方式</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net start mysql80</span><br><span class="line">mysql -u root -p</span><br><span class="line">#输入你之前设置的密码即可</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240711194108488.png" alt="20240711194108488"></p><p>至此MySQL已经配置成功</p><h3 id="可视化软件DataGrip的安装"><a href="#可视化软件DataGrip的安装" class="headerlink" title="可视化软件DataGrip的安装"></a>可视化软件DataGrip的安装</h3><p>可视化图形界面可以大大提高我们的操作效率，这里我们选用DataGrip，试用30天，建议咸鱼买一个密钥。</p><p>官网下载：**<a href="https://www.jetbrains.com/datagrip/">DataGrip: The Cross-Platform IDE for Databases &amp;&amp; SQL by JetBrains</a>**</p><p>配置连接：</p><p><img src="/img/MySQL/20240711194706143.png" alt="20240711194706143"></p><p>点击加号，选择MySQL，root权限，输入之前设置的Password即可</p><p><img src="/img/MySQL/20240711194813748.png" alt="20240711194813748"></p><p>点击Download，然后点击OK即可</p><h3 id="什么是MySQL数据库"><a href="#什么是MySQL数据库" class="headerlink" title="什么是MySQL数据库"></a>什么是MySQL数据库</h3><p><img src="/img/MySQL/20240701190936914.png" alt="20240701190936914"></p><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p><img src="/img/MySQL/20240701191159432.png" alt="20240701191159432"></p><h3 id="SQL通用语法及分类"><a href="#SQL通用语法及分类" class="headerlink" title="SQL通用语法及分类"></a>SQL通用语法及分类</h3><ul><li>DDL: 数据定义语言，用来定义数据库对象（数据库、表、字段）</li><li>DML: 数据操作语言，用来对数据库表中的数据进行增删改</li><li>DQL: 数据查询语言，用来查询数据库中表的记录</li><li>DCL: 数据控制语言，用来创建数据库用户、控制数据库的控制权限</li></ul><h3 id="DDL-用来定义数据库"><a href="#DDL-用来定义数据库" class="headerlink" title="DDL(用来定义数据库)"></a>DDL(用来定义数据库)</h3><h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><p><strong>sys为系统数据库</strong></p><p><img src="/img/MySQL/20240701193100318.png" alt="20240701193100318"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查询当前数据库</span><br><span class="line">select database();</span><br></pre></td></tr></table></figure><h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">已经在数据库内，查看表名</span><br><span class="line">show tables;</span><br><span class="line">查询表结构</span><br><span class="line">desc [表名]</span><br><span class="line">查询指定表的建表语句</span><br><span class="line">show create table [表名]</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701193729156.png" alt="20240701193729156"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table tb_user(</span><br><span class="line">id int comment &#x27;编号&#x27;,</span><br><span class="line">name varchar(50) comment &#x27;姓名&#x27;,</span><br><span class="line">age int comment &#x27;年龄&#x27;,</span><br><span class="line">gender varchar(1) comment &#x27;性别&#x27;</span><br><span class="line">) comment &#x27;用户表&#x27;;</span><br><span class="line">#这里的comment xxx，即为起别名</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701194318441.png" alt="20240701194318441"></p><h4 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h4><h5 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h5><p><img src="/img/MySQL/20240701194702525.png" alt="20240701194702525"></p><h5 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h5><p><img src="/img/MySQL/20240701194619930.png" alt="20240701194619930"></p><h5 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h5><p><img src="/img/MySQL/20240701194749353.png" alt="20240701194749353"></p><p>例1 设计一张员工表信息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.编号(纯数字)</span><br><span class="line">2.员工工号(字符串类型，不超过10位)</span><br><span class="line">3.员工姓名(字符串类型，不超过10位)</span><br><span class="line">4.性别(男/女，储存一个汉字)</span><br><span class="line">5.年龄(正常人年龄，不可能储存复数)</span><br><span class="line">6.身份证号(18位身份证，身份证中有x这样的字符)</span><br><span class="line">7.入职时间(取年、月、日)</span><br></pre></td></tr></table></figure><p>exp:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table emp(</span><br><span class="line">id int comment &#x27;编号&#x27;,</span><br><span class="line">workno varchar(10) comment &#x27;工号&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">gender char(1) comment &#x27;性别&#x27;,</span><br><span class="line">agte tinyint unsigned comment &#x27;年龄&#x27;,</span><br><span class="line">idcard char(18) comment &#x27;身份证号&#x27;,</span><br><span class="line">enterdate date comment &#x27;入职时间&#x27;</span><br><span class="line">)comment &#x27;员工表&#x27;;</span><br></pre></td></tr></table></figure><h4 id="表增删改"><a href="#表增删改" class="headerlink" title="表增删改"></a>表增删改</h4><h5 id="增加"><a href="#增加" class="headerlink" title="增加"></a>增加</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table [表名] add [字段名] [类型] [comment 注释] [约束];</span><br><span class="line">alter table emp add job varchar(10) comment &#x27;工作&#x27;;</span><br></pre></td></tr></table></figure><h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--删除表</span><br><span class="line">drop table [if exist] [表名];</span><br><span class="line">--删除并重新创建此表</span><br><span class="line">truncate table [表名]</span><br><span class="line">--删除字段</span><br><span class="line">alter table [表名] drop [字段名];</span><br></pre></td></tr></table></figure><h5 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table [表名] modify [字段名] [类型];</span><br><span class="line">alter table [表名] change [旧字段名] [新字段名] [类型] [comment 注释] [约束];</span><br><span class="line">--将emp表的表名修改为employee</span><br><span class="line">alter table emp rename to employee;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701202746592.png" alt="20240701202746592"></p><h3 id="DML-用来修改对数据库中的表"><a href="#DML-用来修改对数据库中的表" class="headerlink" title="DML(用来修改对数据库中的表)"></a>DML(用来修改对数据库中的表)</h3><h4 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h4><p><img src="/img/MySQL/20240701225024996.png" alt="20240701225024996"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into [表名] (字段名1,字段名2) values (值1,值2)  #一一对应</span><br><span class="line">--全部字段</span><br><span class="line">insert into [表名] values (值1,值2)</span><br></pre></td></tr></table></figure><h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into a(id, name) value (1,&#x27;hhh&#x27;);</span><br><span class="line">select * from a;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701225732166.png" alt="20240701225732166"></p><h4 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update [表名] set [字段名1=值1],[字段名2=值2],...[where 条件];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update a set name=&#x27;itname&#x27; where id=1;</span><br><span class="line">select * from  a;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701230423747.png" alt="20240701230423747"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add date date null comment &#x27;入职日期&#x27;;</span><br><span class="line">--修改所有id为1的日期为2008-01-01</span><br><span class="line">update a set date=&#x27;2008-01-01&#x27; where id=1;</span><br></pre></td></tr></table></figure><h4 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h4><p><img src="/img/MySQL/20240701231636847.png" alt="20240701231636847"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete from [表名] [where 条件]</span><br><span class="line">delete from a where id=&#x27;1&#x27;</span><br><span class="line">--删除所有员工</span><br><span class="line">delete from a;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240701231322436.png" alt="20240701231322436"></p><h3 id="DQL-用来查询数据库中表的记录"><a href="#DQL-用来查询数据库中表的记录" class="headerlink" title="&#x3D;&#x3D;DQL(用来查询数据库中表的记录)&#x3D;&#x3D;"></a>&#x3D;&#x3D;DQL(用来查询数据库中表的记录)&#x3D;&#x3D;</h3><h4 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--(1)建表</span><br><span class="line">create table emp(</span><br><span class="line">id int comment &#x27;编号&#x27;,</span><br><span class="line">workno varchar(10) comment &#x27;工号&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">gender char(1) comment &#x27;性别&#x27;,</span><br><span class="line">age tinyint unsigned comment &#x27;年龄&#x27;,</span><br><span class="line">idcard varchar(18) comment &#x27;身份证号&#x27;,</span><br><span class="line">workaddress varchar(50) comment &#x27;工作地址&#x27;,</span><br><span class="line">entrydate date comment &#x27;入职时间&#x27;</span><br><span class="line">) comment &#x27;员工表&#x27;;</span><br><span class="line">--(2)插入数据</span><br><span class="line">insert into emp (id,workno,name,gender,age,idcard,workaddress,entrydate) value </span><br><span class="line">(1,&#x27;1&#x27;,&#x27;柳岩&#x27;,&#x27;女&#x27;,20,&#x27;432121451523127854&#x27;,&#x27;北京&#x27;,&#x27;2000-01-01&#x27;),</span><br><span class="line">(2,&#x27;2&#x27;,&#x27;张无忌&#x27;,&#x27;男&#x27;,28,&#x27;432121451523127856&#x27;,&#x27;北京&#x27;,&#x27;2010-01-01&#x27;),</span><br><span class="line">(3,&#x27;3&#x27;,&#x27;韦一笑&#x27;,&#x27;男&#x27;,38,&#x27;432121451523127854&#x27;,&#x27;上海&#x27;,&#x27;2009-01-01&#x27;),</span><br><span class="line">(4,&#x27;4&#x27;,&#x27;赵敏&#x27;,&#x27;女&#x27;,18,&#x27;232121451523127854&#x27;,&#x27;北京&#x27;,&#x27;2008-01-01&#x27;),</span><br><span class="line">(5,&#x27;5&#x27;,&#x27;小招&#x27;,&#x27;女&#x27;,23,&#x27;433121451523127854&#x27;,&#x27;上海&#x27;,&#x27;2000-12-01&#x27;),</span><br><span class="line">(6,&#x27;6&#x27;,&#x27;杨上校&#x27;,&#x27;男&#x27;,88,&#x27;432121451523127554&#x27;,&#x27;北京&#x27;,&#x27;1998-01-20&#x27;),</span><br><span class="line">(7,&#x27;7&#x27;,&#x27;哈哈&#x27;,&#x27;女&#x27;,18,&#x27;432121455523127854&#x27;,&#x27;长沙&#x27;,&#x27;1988-01-01&#x27;),</span><br><span class="line">(8,&#x27;8&#x27;,&#x27;柳如烟&#x27;,&#x27;女&#x27;,88,&#x27;432121477773127854&#x27;,&#x27;西安&#x27;,&#x27;1978-01-01&#x27;),</span><br><span class="line">(9,&#x27;9&#x27;,&#x27;大壮&#x27;,&#x27;男&#x27;,29,&#x27;432121451529927854&#x27;,&#x27;江苏&#x27;,&#x27;2012-01-01&#x27;),</span><br><span class="line">(10,&#x27;10&#x27;,&#x27;刘马&#x27;,&#x27;男&#x27;,66,&#x27;433333451523127854&#x27;,&#x27;永州&#x27;,&#x27;2009-08-01&#x27;),</span><br><span class="line">(11,&#x27;11&#x27;,&#x27;新来的&#x27;,&#x27;女&#x27;,29,&#x27;702121451523127854&#x27;,&#x27;郴州&#x27;,&#x27;2024-07-02&#x27;);</span><br></pre></td></tr></table></figure><h4 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h4><p><img src="/img/MySQL/20240702174225035.png" alt="20240702174225035"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询指定字段 name,workno,age 返回</span><br><span class="line">select name,workno,age from emp;</span><br><span class="line">--2、查询所有字段返回</span><br><span class="line">select * from emp;</span><br><span class="line">--3、查询所有员工的工作地址，起别名</span><br><span class="line">select workaddress as &#x27;工作地址&#x27; from emp;</span><br><span class="line">select workaddress &#x27;工作地址&#x27; from emp;</span><br><span class="line">--4、查询公司员工的上班地址(不要重复)</span><br><span class="line">select distinct workaddress &#x27;工作地址&#x27; from emp;</span><br></pre></td></tr></table></figure><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p><img src="/img/MySQL/20240702175027374.png" alt="20240702175027374"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询年龄小于等于88的员工信息</span><br><span class="line">select * from emp where age &lt;= 88;</span><br><span class="line">--2、查询没有身份证号的员工信息</span><br><span class="line">select * from emp where idcast is null;</span><br></pre></td></tr></table></figure><h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><p><strong>null值不参与聚合函数运算</strong></p><p><img src="/img/MySQL/20240702170342199.png" alt="20240702170342199"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、求员工数量</span><br><span class="line">select count(*) from emp;</span><br><span class="line">--2、统计该员工的平均年龄</span><br><span class="line">select avg(age) from emp;</span><br><span class="line">--3、统计该企业员工的最大年龄</span><br><span class="line">select max(age) from emp;</span><br><span class="line">--4、统计该企业员工的最小年龄</span><br><span class="line">select min(age) from emp;</span><br><span class="line">--5、统计西安地区员工的年龄之和</span><br><span class="line">select sum(age) from emp where workaddress=&#x27;西安&#x27;;</span><br></pre></td></tr></table></figure><h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p><img src="/img/MySQL/20240702172134637.png" alt="20240702172134637"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、统计男性员工和女性员工的数量</span><br><span class="line">select gender,count(*) from emp group by gender;</span><br><span class="line">--2、根据性别分组，统计男性员工和女性员工的平均年龄</span><br><span class="line">select gender,avg(age) from emp group by gender;</span><br><span class="line">--3、查询年龄小于45的员工，并根据工作地址区分员工数量大于等于3的工作地址</span><br><span class="line">select workaddress,count(*) from emp where age &lt; 45 group by workaddress having count(*) &gt;= 3;</span><br></pre></td></tr></table></figure><h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><p><img src="/img/MySQL/20240702173020947.png" alt="20240702173020947"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、根据年龄对公司的员工进行升序、降序排序</span><br><span class="line">select * from emp order by age asc;</span><br><span class="line">select * from emp order by age desc;</span><br><span class="line">--2、根据入职时间，对员工进行降序排序</span><br><span class="line">select * from emp order by entrydate desc;</span><br><span class="line">--3、根据年龄对公司员工先进行升序排序，年龄相同，再按照入职时间进行降序排序</span><br><span class="line">select * from emp order by age asc,entrydate desc;</span><br><span class="line">#若省略asc，则默认升序</span><br></pre></td></tr></table></figure><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p><img src="/img/MySQL/20240702173256808.png" alt="20240702173256808"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询第1页员工数据，每页展示10条记录</span><br><span class="line">select * from emp limit 0,10;</span><br><span class="line">--2、查询第2页员工数据，每页展示10条记录</span><br><span class="line">select * from emp limit 10,10;</span><br></pre></td></tr></table></figure><h4 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h4><p><img src="/img/MySQL/20240702200546666.png" alt="20240702200546666"></p><h3 id="DCL-用来管理数据库用户"><a href="#DCL-用来管理数据库用户" class="headerlink" title="DCL(用来管理数据库用户)"></a>DCL(用来管理数据库用户)</h3><p><img src="/img/MySQL/20240702211004356.png" alt="20240702211004356"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、创建用户 itcast，只能够在当前主机上访问，密码为123456</span><br><span class="line">create user &#x27;itcast&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">--2、创建用户 heima，可以在任意主机上访问该数据库，密码为123456</span><br><span class="line">create user &#x27;heima&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">--3、修改heima密码</span><br><span class="line">alter user &#x27;heima&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;12345&#x27;;</span><br><span class="line">--4、删除heima用户</span><br><span class="line">drop user &#x27;heima&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240703002617489.png" alt="20240703002617489"></p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><p><img src="/img/MySQL/20240705133920948.png" alt="20240705133920948"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#concat</span><br><span class="line">select concat(&#x27;Hello&#x27;,&#x27; MySQL&#x27;);</span><br><span class="line">#substring</span><br><span class="line">select substring(&#x27;Hello MySQL&#x27;,1,5);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、工号统一为5位数，不足5位的补0</span><br><span class="line">update emp set workno=lpad(wrokno,5,&#x27;0&#x27;);</span><br></pre></td></tr></table></figure><h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><p><img src="/img/MySQL/20240705141559294.png" alt="20240705141559294"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、通过数据库的函数，生成一个6位数的随机数验证码</span><br><span class="line">select lpad(round(rand()*1000000,0),6,&#x27;0&#x27;)</span><br></pre></td></tr></table></figure><h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><p><img src="/img/MySQL/20240705142443112.png" alt="20240705142443112"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select date_add(now(),interval 70 mouth);</span><br><span class="line">select datediff(&#x27;2021-12-01&#x27;,&#x27;2021-10-12&#x27;);</span><br><span class="line">--1、查询所有员工的入职天数，并根据入职天数倒序排序</span><br><span class="line">select name,datediff(curdate(),entrydate) as &#x27;entrydays&#x27; from emp order by entrydays desc;</span><br></pre></td></tr></table></figure><h3 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h3><p>实现条件筛选，提高语句的效率</p><p><img src="/img/MySQL/20240705145820737.png" alt="20240705145820737"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、if</span><br><span class="line">select if(false,&#x27;OK&#x27;,&#x27;error&#x27;);</span><br><span class="line">--2、ifnull</span><br><span class="line">select ifnull(&#x27;OK&#x27;,&#x27;Default&#x27;);</span><br><span class="line">#OK</span><br><span class="line">select ifnull(null,&#x27;Default&#x27;);</span><br><span class="line">#Default</span><br><span class="line">--3、查询emp表的员工姓名和工作地址（北京/上海--&gt;一线城市，其他--&gt;二线城市</span><br><span class="line">select name,</span><br><span class="line">(case workaddress</span><br><span class="line">    when &#x27;北京&#x27; then &#x27;一线城市&#x27; </span><br><span class="line">    when &#x27;上海&#x27; then &#x27;一线城市&#x27; </span><br><span class="line">else &#x27;二线城市&#x27; end) as &#x27;工作地址&#x27;,workaddress</span><br><span class="line">from emp;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240705150701657.png" alt="20240705150701657"></p><p>例2</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--统计班级各个学员的成绩，展示的规则如下：</span><br><span class="line">--  &gt;=85, 优秀</span><br><span class="line">--  &gt;=60, 及格</span><br><span class="line">--  否则, 不及格</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#建表</span><br><span class="line">create table score(</span><br><span class="line">id int comment &#x27;ID&#x27;,</span><br><span class="line">name varchar(20) comment &#x27;姓名&#x27;,</span><br><span class="line">math int comment &#x27;数学&#x27;,</span><br><span class="line">english int comment &#x27;英语&#x27;,</span><br><span class="line">chinese int comment &#x27;语文&#x27;</span><br><span class="line">)comment &#x27;学院成绩表&#x27;;</span><br><span class="line">#数据准备</span><br><span class="line">insert into score(id,name,math,english,chinese) values (1,&#x27;Tom&#x27;,67,88,95),(2,&#x27;Rose&#x27;,23,66,90),(3,&#x27;Jack&#x27;,56,98,76);</span><br></pre></td></tr></table></figure><p>开始查询</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select id,name,</span><br><span class="line">(case when math&gt;=85 then &#x27;优秀&#x27; when 60&lt;=math&lt;=85 then &#x27;及格&#x27; when math&lt;=60 then &#x27;不及格&#x27; end) &#x27;数学&#x27;,</span><br><span class="line">    (case when english&gt;=85 then &#x27;优秀&#x27; when 60&lt;=english&lt;=85 then &#x27;及格&#x27; when english&lt;=60 then &#x27;不及格&#x27; end) &#x27;英语&#x27;,</span><br><span class="line">    (case when chinese&gt;=85 then &#x27;优秀&#x27; when 60&lt;=chinese&lt;=85 then &#x27;及格&#x27; when chinese&lt;=60 then &#x27;不及格&#x27; end) &#x27;语文&#x27;</span><br><span class="line">      from score;</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p><img src="/img/MySQL/20240705152752503.png" alt="20240705152752503"></p><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p><strong>用于限制存储在表中的数据，保证数据库中数据的正确、有效性和完整性</strong></p><p><img src="/img/MySQL/20240705154420361.png" alt="20240705154420361"></p><p><img src="/img/MySQL/20240705160039343.png" alt="20240705160039343"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#主键</span><br><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment comment &#x27;主键&#x27;,</span><br><span class="line">name varchar(10) not null unique comment &#x27;姓名&#x27;,</span><br><span class="line">age int check ( age &gt;0 &amp;&amp; age &lt;= 120) comment &#x27;年龄&#x27;,</span><br><span class="line">status char(1) default &#x27;1&#x27; comment &#x27;状态&#x27;,</span><br><span class="line">gender char(1) comment &#x27;性别&#x27;</span><br><span class="line">)comment &#x27;用户表&#x27;;</span><br><span class="line">insert into user(name,age,status,gender) values (&#x27;Tom1&#x27;,19,&#x27;1&#x27;,&#x27;男&#x27;),(&#x27;Tom2&#x27;25,&#x27;0&#x27;,&#x27;男&#x27;);</span><br><span class="line">#auto_increment 后续插入主键支持自增</span><br><span class="line">insert into user(name,age,status,gender) values (&#x27;Tom3&#x27;,25,&#x27;0&#x27;,&#x27;男&#x27;);</span><br><span class="line">#若插入失败，也会占用编号，因为它已经向数据库发送申请</span><br></pre></td></tr></table></figure><h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><p>用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。</p><p><img src="/img/MySQL/20240706132923673.png" alt="20240706132923673"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);</span><br><span class="line">#此时不能删除父表，因为子表还在</span><br><span class="line">#删除外键</span><br><span class="line">alter table emp drop foreign key fk_emp_dept_id;</span><br></pre></td></tr></table></figure><h4 id="外键删除更新行为"><a href="#外键删除更新行为" class="headerlink" title="外键删除更新行为"></a>外键删除更新行为</h4><p><img src="/img/MySQL/20240706134845493.png" alt="20240706134845493"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#cascade</span><br><span class="line">alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id) on update cascade on delete cascade;</span><br></pre></td></tr></table></figure><h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><p><img src="/img/MySQL/20240706135747693.png" alt="20240706135747693"></p><p><img src="/img/MySQL/20240706135925693.png" alt="20240706135925693"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#学生表</span><br><span class="line">create table student(</span><br><span class="line">id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">no varchar(10) comment &#x27;学号&#x27;</span><br><span class="line">)comment &#x27;学生表&#x27;;</span><br><span class="line"></span><br><span class="line">insert into student values (null,&#x27;我靠&#x27;,&#x27;05020231&#x27;),(null,&#x27;holy&#x27;,&#x27;05020232&#x27;),(null,&#x27;shit&#x27;,&#x27;05020233&#x27;),(null,&#x27;bro&#x27;,&#x27;05020234&#x27;),(null,&#x27;m3&#x27;,&#x27;05020235&#x27;);</span><br><span class="line">#课程表</span><br><span class="line">create table course(</span><br><span class="line">id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;课程名称&#x27;</span><br><span class="line">) comment &#x27;课程表&#x27;;</span><br><span class="line"></span><br><span class="line">insert into course values (null,&#x27;Java&#x27;),(null,&#x27;PHP&#x27;),(null,&#x27;MySQL&#x27;),(null,&#x27;Python&#x27;);</span><br><span class="line">#学生课程中间表</span><br><span class="line">create table student_course(</span><br><span class="line">id int auto_increment primary key comment &#x27;主键&#x27;,</span><br><span class="line">studentid int not null comment &#x27;学生ID&#x27;,</span><br><span class="line">courseid int not null comment &#x27;课程ID&#x27;,</span><br><span class="line">constraint fk_courseid foreign key (courseid) references course (id),</span><br><span class="line">constraint fk_studentid foreign key (studentid) references student (id)</span><br><span class="line">)comment &#x27;学生课程中间表&#x27;;</span><br><span class="line"></span><br><span class="line">insert into student_course values(null,1,1),(null,1,2),(null,1,3),(null,2,2),(null,3,4);</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240706141703813.png" alt="20240706141703813"></p><p><img src="/img/MySQL/20240706141716234.png" alt="20240706141716234"></p><p><img src="/img/MySQL/20240706141728458.png" alt="20240706141728458"></p><p><img src="/img/MySQL/20240706141851668.png" alt="20240706141851668"></p><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p><strong>消除无效笛卡尔积</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from emp, dept where emp.dept_id=dept.id;</span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240708181229542.png" alt="20240708181229542"></p><h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p><img src="/img/MySQL/20240708181900776.png" alt="20240708181900776"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询每一个员工的姓名，及关联部门的名称(隐式内连接)</span><br><span class="line">select emp.name, dept.name from emp,dept where emp.dept_id=dept.id;</span><br><span class="line">--2、查询每一个员工的姓名，及关联的部门的名称(显式内连接)</span><br><span class="line">select emp.name,dept.name from emp inner join dept on emp.dept_id=dept.id;</span><br></pre></td></tr></table></figure><h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p><img src="/img/MySQL/20240708214515491.png" alt="20240708214515491"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询emp表的所有数据，和对应的部门信息(左外连接)</span><br><span class="line">select emp.*,dept.* from emp left outer join dept on emp.dept_id=dept.id;</span><br><span class="line">--2、查询emp表的所有数据，和对应的部门信息(右外连接)</span><br><span class="line">select emp.*,dept.* from emp right outer join dept on emp.dept_id=dept.id;</span><br></pre></td></tr></table></figure><h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><p><img src="/img/MySQL/20240708215323708.png" alt="20240708215323708"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询员工及其所属领导的名字</span><br><span class="line">select a.name , b.name from emp a ,emp b where a.managerid=b.managerid;</span><br><span class="line">--2、查询所有员工emp及其领导的名字emp，如果员工没有领导，也需要查询出来</span><br><span class="line">select a.name &#x27;员工&#x27; ,b.name &#x27;领导&#x27; from emp a left join emp b on a.managerid =b.id</span><br></pre></td></tr></table></figure><h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询薪资低于5000，年龄大于50的员工</span><br><span class="line">select * from emp where salary &lt; 5000</span><br><span class="line">union all</span><br><span class="line">select * from emp where age &gt; 50</span><br><span class="line">#去掉all，all即为直接合并</span><br><span class="line">select * from emp where salary &lt; 5000</span><br><span class="line">union</span><br><span class="line">select * from emp where age &gt; 50</span><br></pre></td></tr></table></figure><h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p><img src="/img/MySQL/20240708222829077.png" alt="20240708222829077"></p><h5 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询&quot;销售部&quot;部门的所有员工信息</span><br><span class="line">--a、查询&quot;销售部&quot;部门ID</span><br><span class="line">select id from dept where name=&#x27;销售部&#x27;;</span><br><span class="line">--b、根据销售部部门ID，查询员工信息</span><br><span class="line">seslect * from emp where dept_id=(select id from dept where name=&#x27;销售部&#x27;);</span><br><span class="line">--2、查询在&quot;柳岩&quot;入职后的员工信息</span><br><span class="line">--a、查询 柳岩 的入职信息</span><br><span class="line">select entrydate from emp where name=&#x27;柳岩&#x27;;</span><br><span class="line">--b、查询指定入职信息之后入职的员工信息</span><br><span class="line">select * from emp where entrydate&gt;(select entrydate from emp where name=&#x27;柳岩&#x27;);</span><br></pre></td></tr></table></figure><h5 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询&quot;销售部&quot;和&quot;市场部&quot;的所有员工信息</span><br><span class="line">select * from emp where dept_id in (select id from dept where name=&#x27;销售部&#x27; or name=&#x27;市场部&#x27;);</span><br><span class="line">--2、查询比 研发部 所有人年龄都小的员工信息</span><br><span class="line">select id from dept where name=&#x27;研发部&#x27;;</span><br><span class="line">1;</span><br><span class="line">select * from emp where age &lt; all(select age from emp where dept_id=(select id from dept where name=&#x27;研发部&#x27;));</span><br><span class="line">--3、查询比 研发部 其中任意一人年龄小的员工信息</span><br><span class="line">select * from emp where age &lt; any (select age from emp where dept_id=(select id from dept where name=&#x27;研发部&#x27;));</span><br></pre></td></tr></table></figure><h5 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询与&quot;张无忌&quot;的薪资及其直属领导相同的员工信息</span><br><span class="line">select * from emp where (salary,managerid) = (select salary,managerid from emp where name=&#x27;张无忌&#x27;);</span><br></pre></td></tr></table></figure><h5 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询与&quot;新来的&quot;,&quot;刘马&quot;的职位和薪资相同的员工信息</span><br><span class="line">select * from emp where (job,salary) in (select job,salary from emp where name= &quot;新来的&quot; or name=&quot;刘马&quot;);</span><br><span class="line">--2、查询入职日期是&#x27;2006-01-21&#x27;之后的员工信息，及其部门信息</span><br><span class="line">select e.*,d.* from (select * from emp where entrydate &gt; &#x27;2006-01-21&#x27;) e left join dept d on e.dept_id=d.id;</span><br></pre></td></tr></table></figure><h3 id="案例"><a href="#案例" class="headerlink" title="&#x3D;&#x3D;案例&#x3D;&#x3D;"></a>&#x3D;&#x3D;案例&#x3D;&#x3D;</h3><p><strong>员工信息关系图</strong></p><p>这里注意部门表的id也设置为主键</p><p><img src="/img/MySQL/20240711151223733.png" alt="20240711151223733"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#部门表</span><br><span class="line">create table dept(</span><br><span class="line">    id   int primary key comment &#x27;部门号&#x27;,</span><br><span class="line">    name varchar(10)  comment &#x27;部门名称&#x27;</span><br><span class="line">)comment &#x27;部门表&#x27;;</span><br><span class="line"></span><br><span class="line">#工资等级表</span><br><span class="line">create table salgrade(</span><br><span class="line">grade int primary key comment &#x27;工资等级&#x27;,</span><br><span class="line">losal int comment &#x27;最低工资&#x27;,</span><br><span class="line">hisal int comment &#x27;最低工资&#x27;</span><br><span class="line">)comment &#x27;薪资等级表&#x27;;</span><br><span class="line"></span><br><span class="line">#员工表</span><br><span class="line">create table emp(</span><br><span class="line">    id         int auto_increment comment &#x27;编号&#x27; primary key,</span><br><span class="line">    workno      varchar(10)       comment &#x27;工号&#x27;,</span><br><span class="line">    name        varchar(10)       comment &#x27;姓名&#x27;,</span><br><span class="line">    gender      char              comment &#x27;性别&#x27;,</span><br><span class="line">    age         tinyint unsigned  comment &#x27;年龄&#x27;,</span><br><span class="line">    idcard      varchar(18)       comment &#x27;身份证号&#x27;,</span><br><span class="line">    workaddress varchar(50)       comment &#x27;工作地址&#x27;,</span><br><span class="line">    entrydate   date              comment &#x27;入职时间&#x27;,</span><br><span class="line">    job         varchar(10)       comment &#x27;工作&#x27;,</span><br><span class="line">    salary      int               comment &#x27;工资&#x27;,</span><br><span class="line">    leaderidint              comment &#x27;所属领导&#x27;,</span><br><span class="line">    salgrade_grade int            comment &#x27;工资等级&#x27;,</span><br><span class="line">    dept_id     int               comment &#x27;部门号&#x27;,</span><br><span class="line">    constraint fk_emp_dept_id</span><br><span class="line">        foreign key (dept_id) references dept (id),</span><br><span class="line">    constraint fk_emp_salgrade_grade</span><br><span class="line">        foreign key (salgrade_grade) references salgrade (grade)</span><br><span class="line">)</span><br><span class="line">    comment &#x27;员工表&#x27;;</span><br></pre></td></tr></table></figure><p>插入数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#工资等级表</span><br><span class="line">insert into salgrade values(1,0,3000),(2,3001,5000),(3,5001,8000),(4,8001,10000),(5,10001,15000),(6,15001,20000),(7,20001,25000),(8,25001,30000);</span><br><span class="line"></span><br><span class="line">#部门表</span><br><span class="line">insert into dept values</span><br><span class="line">(1,&#x27;研发部&#x27;),(2,&#x27;市场部&#x27;),(3,&#x27;财务部&#x27;),(4,&#x27;销售部&#x27;),(5,&#x27;总经办&#x27;),(6,&#x27;人事部&#x27;);</span><br><span class="line"></span><br><span class="line">#员工表</span><br><span class="line">insert into emp</span><br><span class="line">(id, workno, name, gender, age, idcard, workaddress, entrydate, job, salary, leaderid, salgrade_grade, dept_id)</span><br><span class="line">values</span><br><span class="line">(1,&#x27;1&#x27;,&#x27;柳岩&#x27;,&#x27;女&#x27;,20,&#x27;432121451523127854&#x27;,&#x27;北京&#x27;,&#x27;2004-01-01&#x27;,&#x27;交际花&#x27;,26666,9,6,5),</span><br><span class="line">(2,&#x27;2&#x27;,&#x27;张无忌&#x27;,&#x27;男&#x27;,24,&#x27;432121451523127856&#x27;,&#x27;北京&#x27;,&#x27;2000-01-01&#x27;,&#x27;算法程序员&#x27;,18500,9,6,1),</span><br><span class="line">(3,&#x27;3&#x27;,&#x27;韦一笑&#x27;,&#x27;男&#x27;,25,&#x27;432121451523127854&#x27;,&#x27;上海&#x27;,&#x27;1999-01-01&#x27;,&#x27;python程序员&#x27;,14500,2,5,1),</span><br><span class="line">(4,&#x27;4&#x27;,&#x27;赵敏&#x27;,&#x27;女&#x27;,38,&#x27;232121451523127854&#x27;,&#x27;武汉&#x27;,&#x27;1986-01-01&#x27;,&#x27;运维&#x27;,12500,2,5,1),</span><br><span class="line">(5,&#x27;5&#x27;,&#x27;小招&#x27;,&#x27;女&#x27;,24,&#x27;433121451523127854&#x27;,&#x27;上海&#x27;,&#x27;2000-12-01&#x27;,&#x27;数据库工程师&#x27;,17000,2,6,1),</span><br><span class="line">(6,&#x27;6&#x27;,&#x27;杨上校&#x27;,&#x27;男&#x27;,88,&#x27;432121451523127554&#x27;,&#x27;北京&#x27;,&#x27;1998-01-20&#x27;,&#x27;司机&#x27;,6500,9,3,5),</span><br><span class="line">(7,&#x27;7&#x27;,&#x27;哈哈&#x27;,&#x27;女&#x27;,18,&#x27;432121455523127854&#x27;,&#x27;长沙&#x27;,&#x27;1988-01-01&#x27;,&#x27;采购员&#x27;,9000,9,4,2),</span><br><span class="line">(8,&#x27;8&#x27;,&#x27;柳如烟&#x27;,&#x27;女&#x27;,88,&#x27;432121477773127854&#x27;,&#x27;西安&#x27;,&#x27;1978-01-01&#x27;,&#x27;程序员鼓励师&#x27;,23000,1,7,5),</span><br><span class="line">(9,&#x27;9&#x27;,&#x27;腰子哥&#x27;,&#x27;男&#x27;,54,&#x27;432121451529927854&#x27;,&#x27;江苏&#x27;,&#x27;1970-01-01&#x27;,&#x27;老总&#x27;,null,null,null,5),</span><br><span class="line">(10,&#x27;10&#x27;,&#x27;刘马&#x27;,&#x27;男&#x27;,66,&#x27;433333451523127854&#x27;,&#x27;永州&#x27;,&#x27;2009-08-01&#x27;,&#x27;销售&#x27;,8500,9,4,4),</span><br><span class="line">(11,&#x27;11&#x27;,&#x27;新来的&#x27;,&#x27;女&#x27;,29,&#x27;702121451523127854&#x27;,&#x27;郴州&#x27;,&#x27;2024-07-02&#x27;,null,null,null,null,null),</span><br><span class="line">(12,&#x27;12&#x27;,&#x27;吗嘛哈&#x27;,&#x27;男&#x27;,36,&#x27;553333451523127854&#x27;,&#x27;怀化&#x27;,&#x27;1988-08-01&#x27;,&#x27;人事&#x27;,13500,9,5,6);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/img/MySQL/20240711154352997.png" alt="20240711154352997"></p><p><img src="/img/MySQL/20240711154502800.png" alt="20240711154502800"></p><p><img src="/img/MySQL/20240711154533951.png" alt="20240711154533951"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--1、查询员工的姓名、年龄、职位、部门信息(隐式内连接)</span><br><span class="line">select emp.name,emp.age,emp.job,emp.dept_id from emp,dept where emp.dept_id=dept.id;</span><br><span class="line"></span><br><span class="line">--2、查询年龄小于30岁的员工的姓名、年龄、职位、部门信息(显式内连接)</span><br><span class="line">select emp.name,emp.age,emp.job,emp.dept_id from emp inner join dept on emp.dept_id=dept.id  where emp.age &lt; 30;</span><br><span class="line"></span><br><span class="line">--3、查询所有员工的部门ID、部门名称</span><br><span class="line">select distinct e.id,d.name from emp e ,dept d where e.dept_id=d.id;</span><br><span class="line">#左外连接</span><br><span class="line">select emp.name,emp.dept_id,dept.name from emp left outer join dept on emp.dept_id=dept.id;</span><br><span class="line"></span><br><span class="line">--4、查询所有年龄大于35岁的员工，及其归属的部门名称；若没有分配部门，也要显示出来</span><br><span class="line">#左外连接</span><br><span class="line">select emp.name,dept.name from emp left outer join dept on emp.dept_id=dept.id where emp.age &lt; 35;</span><br><span class="line"></span><br><span class="line">--5、查询所有员工的工资等级</span><br><span class="line">select emp.name,emp.salgrade_grade from emp;</span><br><span class="line"></span><br><span class="line">--6、查询 研发部 所有员工的信息及工资等级</span><br><span class="line">select distinct emp.name,emp.salary,emp.salgrade_grade from emp right outer join salgrade on salgrade.losal&lt;emp.salary&lt;salgrade.hisal where emp.dept_id=1;</span><br><span class="line"></span><br><span class="line">--7、查询 研发部 员工的平均工资</span><br><span class="line">select avg(emp.salary) from emp where emp.dept_id=1;</span><br><span class="line"></span><br><span class="line">--8、查询工资比 小招 高的员工信息</span><br><span class="line">select emp.* from emp where salary &gt; (select emp.salary from emp where emp.name=&#x27;小招&#x27;);</span><br><span class="line"></span><br><span class="line">--9、查询比平均薪资高的员工信息</span><br><span class="line">select emp.* from emp where salary &gt; (select avg(emp.salary) from emp);</span><br><span class="line"></span><br><span class="line">--10、查询低于本部门工资的员工信息</span><br><span class="line">select * from emp e2 where e2.salary &lt; (select avg(e1.salary) from emp e1 where e1.dept_id = e2.dept_id);</span><br><span class="line">#检验</span><br><span class="line">select *,(select avg(e1.salary) from emp e1 where e1.dept_id = e2.dept_id) &#x27;平均薪资&#x27; from emp e2 where e2.salary &lt; (select avg(e1.salary) from emp e1 where e1.dept_id = e2.dept_id);</span><br><span class="line"></span><br><span class="line">--11、查询所有的部门信息，并统计部门的员工人数</span><br><span class="line">#子查询</span><br><span class="line">select d.id, d.name ,(select count(*) from emp e where e.dept_id=d.id) &#x27;人数&#x27; from dept d;</span><br><span class="line"></span><br><span class="line">*--12、查询之前学生成绩表中所有学生的选课情况，展示出学生姓名，学号，课程名称</span><br><span class="line">#student.id=studenidt_course.studentid,course.id=stuent_course.courseid</span><br><span class="line">select s.name , c.name from student s,stuent_course sc ,course c where s.id=sc.studentid and c.id=sc.courseid;</span><br></pre></td></tr></table></figure><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p><img src="/img/MySQL/20240709144205065.png" alt="20240709144205065"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table account(</span><br><span class="line">id int auto_increment primary key comment &#x27;主键ID&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;姓名&#x27;,</span><br><span class="line">money int comment &#x27;余额&#x27;</span><br><span class="line">)comment &#x27;账号表&#x27;;</span><br><span class="line">insert into account(id,name,money) values(null,&#x27;张三&#x27;,2000),(null,&#x27;李四&#x27;,2000),(null,&#x27;王五&#x27;,8000);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#张三给李四转账1000</span><br><span class="line">--李四</span><br><span class="line">update account set money = money+1000 where name=&#x27;李四&#x27;;</span><br><span class="line">--张三</span><br><span class="line">update account set money = money-1000 where name=&#x27;张三&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set @@autocommit=0;    --设置为手动提交，运行事务操作之后得再执行事务提交</span><br><span class="line">--提交事务</span><br><span class="line">commit;</span><br><span class="line">--一旦执行错误，需要执行回滚操作</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure><h3 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h3><p><img src="/img/MySQL/20240709145733165.png" alt="20240709145733165"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">start transaction/或begin;</span><br><span class="line">#张三给李四转账1000</span><br><span class="line">--李四</span><br><span class="line">update account set money = money+1000 where name=&#x27;李四&#x27;;</span><br><span class="line">程序出现异常...</span><br><span class="line">--张三</span><br><span class="line">update account set money = money-1000 where name=&#x27;张三&#x27;;</span><br><span class="line">--出现错误仍需回滚</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure><h3 id="事务四大特性"><a href="#事务四大特性" class="headerlink" title="事务四大特性"></a>事务四大特性</h3><p><img src="/img/MySQL/20240709150413356.png" alt="20240709150413356"></p><h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><p><strong>脏读</strong></p><p>A事务读取到了B事务未提交的数据</p><p><strong>不可重复读</strong></p><p>一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读</p><p><strong>幻读</strong></p><p>一个事务按照条件查询数据时，没有对应的数据行，但是在插入行数据时，又发现这行数据已经存在，好像出现了“幻影”</p><h3 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h3><p><img src="/img/MySQL/20240709181741158.png" alt="20240709181741158"></p><p>基础篇已完结，本MySQL数据库笔记大部分来自黑马程序员的学习视频，仅供参考，如有不足之处欢迎指正。</p>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
